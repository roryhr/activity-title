{% extends 'titles/base.html' %}

{% block title %}
Activity Title - Home
{% endblock %}

{% block content %}
{% load static %}
{% block messages %}
<ul id="messages">
    {% for message in messages %}
    <li>{{ message }}</li>
    {% endfor %}
</ul>
{% endblock %}

<section class="titles">
    {% if user.is_authenticated %}
    <p>Welcome back, {{ user.first_name }}!</p>
    {% else %}
    <p>Welcome to the Activity Title App!</p>
    {% endif %}
</section>

<section class="titles">
    <h1>Create New Title</h1>
    <form method="post">
        {% csrf_token %}
        {{ form.as_p }}
        <button type="submit">Create</button>
    </form>
    <h2>List of Titles</h2>
    <ul>
        {% for title in latest_strava_title_list %}
        <li>
            <a href="{% url 'titles:detail' title.id %}" class="title-link">{{ title.title|linebreaksbr }}</a>
            <p class="created-at">Created at: {{ title.created_at }}</p>
            <p class="created-at">Used at: {{ title.used_at }}</p>
        </li>
        {% empty %}
        <li>No titles are available.</li>
        {% endfor %}
    </ul>
</section>

<section class="strava-login">
    <p>Connect with Strava to login</p>
    <a href="{% url 'titles:strava_login' %}" class="strava-button">
        <img src="{% static 'img/btn_strava_connectwith_orange.png' %}" alt="Login with Strava">
    </a>
    <p class="affiliation-note">We are not affiliated with Strava.</p>
</section>
{% endblock %}
